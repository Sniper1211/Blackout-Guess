# 修复登录后页面版本“回退”问题

经过排查，问题的原因在于 **Supabase 登录后的重定向机制**。当您在本地测试（如 `localhost:8000`）点击登录时，Google 认证完成后会默认跳转到 Supabase 后台配置的“Site URL”（通常是您的线上生产地址，如 GitHub Pages）。由于线上地址目前运行的还是旧版本的代码，因此您会看到旧的布局和快捷键逻辑。

## 修复方案：动态设置登录重定向地址

我们将修改 `js/app.js`，让登录操作显式地跳转回当前页面所在的地址，而不是固定的线上地址。

### 1. 修改 `js/app.js` 的登录逻辑
- 在 `signInWithOAuth` 方法中添加 `redirectTo` 参数。
- 使用 `window.location.origin + window.location.pathname` 动态获取当前页面的完整路径（包括 `index.html` 或子目录路径）。
- 这样无论您是在本地 `localhost` 还是线上测试，登录后都会留在当前环境，保持代码版本一致。

### 2. 统一清理冗余逻辑
- 确保 `app.js` 中的重定向逻辑与 `admin.js` 保持一致，增强代码的健壮性。

## 验证建议
修复后，请您再次尝试在本地环境下登录。登录成功后，页面地址栏应依然保持为 `localhost:8000/...`，且新的双栏布局和修复后的快捷键应继续生效。

您是否同意执行此修复？